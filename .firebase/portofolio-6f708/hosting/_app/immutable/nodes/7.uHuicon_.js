import{L as Ue,M as se,i as Qe,K as Ve,r as ie,N as xe,O as Ge,c as L,J as F,$ as Ye,I as q,P as Ze,H as Me,g as w,e as X,f as g,Q as T,t as ke,R as J,S as $e,T as He,b as Le,U as et,a as ne,G as V,o as I,V as C,d as Xe,s as tt}from"../chunks/disclose-version.B5tPFymZ.js";import{p as at,a as rt,h as a,l as b,j as P,m as fe,u as oe,o as ve}from"../chunks/runtime.QCgSEibu.js";import{e as Te,a as Ce}from"../chunks/each.HxRgVaxx.js";import{i as Y}from"../chunks/if.DcFoSNuG.js";import{u as st,s as it}from"../chunks/store.DaqSqxOx.js";import{p as nt,i as ot,a as lt,r as ct}from"../chunks/entry.DEzs8AnO.js";const dt=(e,t={})=>{Fe(t);let{colors:c=["#FFC700","#FF0000","#2E3191","#41BBC7"],duration:u=3500,force:r=.5,particleCount:f=150,particleShape:n="mix",particleSize:d=12,destroyAfterDone:E=!0,stageHeight:h=800,stageWidth:y=1600}=t;(function(o){const m=Ae("style");m.dataset.neoconfetti="",m.textContent='@keyframes fk9XWG_y-axis{to{transform:translate3d(0,var(--stage-height),0)}}@keyframes fk9XWG_x-axis{to{transform:translate3d(var(--x-landing-point),0,0)}}@keyframes fk9XWG_rotation{50%{transform:rotate3d(var(--half-rotation),180deg)}to{transform:rotate3d(var(--rotation),360deg)}}.fk9XWG_container{width:0;height:0;z-index:1200;position:relative;overflow:visible}.fk9XWG_particle{animation:x-axis var(--duration-chaos)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:fk9XWG_x-axis}.fk9XWG_particle>div{animation:y-axis var(--duration-chaos)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--width);height:var(--height);animation-name:fk9XWG_y-axis;position:absolute;top:0;left:0}.fk9XWG_particle>div:before{height:100%;width:100%;content:"";background-color:var(--bgcolor);animation:rotation var(--rotation-duration)infinite linear;border-radius:var(--border-radius);animation-name:fk9XWG_rotation;display:block}',je(document.head,m)})(),e.classList.add("fk9XWG_container"),e.style.setProperty("--stage-height",h+"px");let z,M=Oe(f,c),A=Pe(e,M);function K(o,m){const x=le(G()*(gt-1)),l=n!=="rectangles"&&(n==="circles"||pt(x)),v=(i,p)=>o.style.setProperty(i,p+"");v("--x-landing-point",we(me(De(m,90)-180),0,180,-y/2,y/2)+"px"),v("--duration-chaos",u-le(1e3*G())+"ms");const N=G()<ft?Z(G()*vt,2):0;v("--x1",N),v("--x2",-1*N),v("--x3",N),v("--x4",Z(me(we(me(De(m,90)-180),0,180,-1,1)),4)),v("--y1",Z(G()*Ne,4)),v("--y2",Z(G()*r*(Je()?1:-1),4)),v("--y3",Ne),v("--y4",Z(mt(we(me(m-180),0,180,r,-r),0),4)),v("--width",(l?d:le(4*G())+d/2)+"px"),v("--height",(l?d:le(2*G())+d)+"px");const s=x.toString(2).padStart(3,"0").split("");v("--half-rotation",s.map(i=>+i/2+"")),v("--rotation",s),v("--rotation-duration",Z(G()*(ut-ze)+ze)+"ms"),v("--border-radius",l?"50%":0)}for(const[o,m]of Object.entries(A))K(m,M[+o].degree);return Promise.resolve().then(()=>z=setTimeout(()=>E&&(e.innerHTML=""),u)),{update(o){Fe(o);const m=o.particleCount??f,x=o.colors??c,l=o.stageHeight??h;if(M=Oe(m,x),m===f&&JSON.stringify(c)!==JSON.stringify(x))for(const[v,{color:N}]of Object.entries(M))A[+v].style.setProperty("--bgcolor",N);m!==f&&(e.innerHTML="",A=Pe(e,M)),E&&!o.destroyAfterDone&&clearTimeout(z),e.style.setProperty("--stage-height",l+"px"),c=x,u=o.duration??u,r=o.force??r,f=m,n=o.particleShape??n,d=o.particleSize??d,E=o.destroyAfterDone??E,h=l,y=o.stageWidth??y},destroy(){clearTimeout(z)}}};function Pe(e,t=[]){const c=[];for(const{color:u}of t){const r=Ae("div");r.className="fk9XWG_particle",r.style.setProperty("--bgcolor",u);const f=Ae("div");je(r,f),je(e,r),c.push(r)}return c}const ze=200,ut=800,ft=.1,vt=.3,Ne=.5,me=Math.abs,G=Math.random,le=Math.round,mt=Math.max,Ae=e=>document.createElement(e),je=(e,t)=>e.appendChild(t),Oe=(e,t)=>Array.from({length:e},(c,u)=>({color:t[u%t.length],degree:360*u/e})),Z=(e,t=2)=>le((e+Number.EPSILON)*10**t)/10**t,we=(e,t,c,u,r)=>(e-t)*(r-u)/(c-t)+u,De=(e,t)=>e+t>360?e+t-360:e+t,Je=()=>G()>.5,gt=6,pt=e=>e!==1&&Je(),Ee=e=>e===void 0,$=(e,t)=>{if(!Ee(e)&&Number.isSafeInteger(e)&&e<0)throw new Error(t+" must be a positive integer")},Fe=({particleCount:e,duration:t,colors:c,particleSize:u,force:r,stageHeight:f,stageWidth:n,particleShape:d})=>{if($(e,"particleCount"),$(t,"duration"),$(u,"particleSize"),$(r,"force"),$(f,"stageHeight"),$(n,"stageWidth"),!Ee(d)&&!/^(mix|circles|rectangles)$/i.test(d))throw new Error('particlesShape should be either "mix" or "circles" or "rectangle"');if(!Ee(c)&&!Array.isArray(c))throw new Error("colors must be an array of strings");if(r>1)throw new Error("force must be within 0 and 1")};function _t(e){const t=JSON.parse(e);return t.data&&(t.data=nt(t.data)),t}function qe(e){return HTMLElement.prototype.cloneNode.call(e)}function bt(e,t=()=>{}){const c=async({action:r,result:f,reset:n=!0,invalidateAll:d=!0})=>{f.type==="success"&&(n&&HTMLFormElement.prototype.reset.call(e),d&&await ot()),(location.origin+location.pathname===r.origin+r.pathname||f.type==="redirect"||f.type==="error")&&lt(f)};async function u(r){var K,o,m,x;if(((K=r.submitter)!=null&&K.hasAttribute("formmethod")?r.submitter.formMethod:qe(e).method)!=="post")return;r.preventDefault();const n=new URL((o=r.submitter)!=null&&o.hasAttribute("formaction")?r.submitter.formAction:qe(e).action),d=new FormData(e),E=(m=r.submitter)==null?void 0:m.getAttribute("name");E&&d.append(E,((x=r.submitter)==null?void 0:x.getAttribute("value"))??"");const h=new AbortController;let y=!1;const M=await t({action:n,cancel:()=>y=!0,controller:h,formData:d,formElement:e,submitter:r.submitter})??c;if(y)return;let A;try{const l=await fetch(n,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:d,signal:h.signal});A=_t(await l.text()),A.type==="error"&&(A.status=l.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;A={type:"error",error:l}}M({action:n,formData:d,formElement:e,update:l=>c({action:n,result:A,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:A})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",u),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",u)}}}const Ie="(prefers-reduced-motion: reduce)",ht=()=>window.matchMedia(Ie).matches,yt=ct(ht(),e=>{{const t=u=>{e(u.matches)},c=window.matchMedia(Ie);return c.addEventListener("change",t),()=>{c.removeEventListener("change",t)}}});var xt=w('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),kt=w("(correct)",!0),wt=w("(present)",!0),At=w("(absent)",!0),jt=w("empty",!0),Et=w('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),St=w('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',!0),Wt=w('<p class="svelte-1pg2j5l"> </p>'),Gt=w('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',!0),Mt=w('<button formaction="?/update" name="key"> </button>'),Ht=w('<div class="row svelte-1pg2j5l"></div>'),Lt=w('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Xt=w('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Tt=w('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="POST" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',!0);function Ft(e,t){rt(t,!1);const c={};st(c);const u=()=>it(yt,"$reduced_motion",c),r=V(),f=V(),n=V(),d=V();let E=Ue(t,"form",4),h=V(),y=V();function z(s){var p;const i=s.target.getAttribute("data-key");i==="backspace"?(P(n,a(n).slice(0,-1)),(p=E())!=null&&p.badGuess&&E(E().badGuess=!1,!0)):a(n).length<5&&P(n,a(n)+i)}function M(s){var i;s.metaKey||s.key==="Enter"&&!a(d)||(i=document.querySelector(`[data-key="${s.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}se(()=>{fe(t.data),oe(()=>{P(r,t.data.answers.at(-1)==="xxxxx")})}),se(()=>{a(r),fe(t.data),oe(()=>{P(f,a(r)?-1:t.data.answers.length)})}),se(()=>{fe(t.data),a(f),oe(()=>{P(n,t.data.guesses[a(f)]||"")})}),se(()=>{a(n),oe(()=>{P(d,a(n).length===5)})}),se(()=>{a(h),fe(t.data),oe(()=>{P(h,{}),P(y,{}),t.data.answers.forEach((s,i)=>{const p=t.data.guesses[i];for(let _=0;_<5;_+=1){const k=p[_];s[_]==="x"?(ve(h,a(h)[k]="exact"),ve(y,a(y)[k]="correct")):a(h)[k]||(ve(h,a(h)[k]=s[_]==="c"?"close":"missing"),ve(y,a(y)[k]=s[_]==="c"?"present":"absent"))}})})}),Qe();var A=I(e,!0,Tt);Ve(s=>{var i=F(s,!0,xt);Ye.title="Sverdle",q(s,i)});var K=ne(A),o=g(g(K,!0)),m=X(o),x=g(g(m,!0)),l=g(g(x,!0)),v=X(l),N=g(g(o,!0));ie(()=>{var s;T(x,"playing",!a(r)),T(x,"bad-guess",(s=E())==null?void 0:s.badGuess)}),xe("keydown",Ze,M,!1),Ge(o,(s,i)=>bt(s,i),()=>()=>({update:s})=>{s({reset:!1})}),Te(x,()=>Array.from(Array(6).keys()),13,(s,i)=>b(s),(s,i,p)=>{var _=I(s,!0,St);const k=C(()=>b(i)===a(f));var H=ne(_),O=X(H),R=g(g(H,!0));ie(()=>{ke(O,`Row ${J(b(i)+1)}`),T(R,"current",a(k))}),Te(R,()=>Array.from(Array(5).keys()),13,(ee,D)=>b(ee),(ee,D,ge)=>{var j=F(ee,!0,Et);const pe=C(()=>a(k)?a(n):t.data.guesses[b(i)]),S=C(()=>{var W;return(W=t.data.answers[b(i)])==null?void 0:W[b(D)]}),ce=C(()=>{var W;return((W=a(pe))==null?void 0:W[b(D)])??""}),te=C(()=>a(k)&&b(D)===a(pe).length),B=C(()=>a(S)==="x"),U=C(()=>a(S)==="c"),Q=C(()=>a(S)==="_");var Se=X(j),We=g(Se),Ke=X(We),_e=g(g(We,!0));$e(_e);var be,he;ie(()=>{T(j,"exact",a(B)),T(j,"close",a(U)),T(j,"missing",a(Q)),T(j,"selected",a(te)),ke(Se,`${J(a(ce))} `),be!==(be=!a(k))&&(_e.disabled=be),he!==(he=a(ce))&&(_e.value=he)}),Y(Ke,()=>a(B),W=>{var de=I(W,!0,kt);L(W,de)},W=>{var de=Xe(W),Re=ne(de);Y(Re,()=>a(U),ae=>{var ue=I(ae,!0,wt);L(ae,ue)},ae=>{var ue=Xe(ae),Be=ne(ue);Y(Be,()=>a(Q),re=>{var ye=I(re,!0,At);L(re,ye)},re=>{var ye=I(re,!0,jt);L(re,ye)}),L(ae,ue)}),L(W,de)}),q(ee,j)},null),L(s,_)},null),Y(v,()=>a(r)||t.data.answers.length>=6,s=>{var i=I(s,!0,Gt),p=ne(i),_=g(g(p,!0)),k=X(_);Me(k,()=>`${J(a(r)?"you won :)":"game over :(")} play again?`),Y(p,()=>!a(r)&&t.data.answer,H=>{var O=F(H,!0,Wt),R=X(O);Me(R,()=>`the answer was "${J(t.data.answer)}"`),q(H,O)},null),L(s,i)},s=>{var i=F(s,!0,Lt),p=X(i),_=g(g(p,!0)),k=g(g(_,!0)),H;ie(()=>{H!==(H=!a(d))&&(p.disabled=H),T(p,"selected",a(d))}),xe("click",_,He(z),!1),Ce(k,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],1,(O,R,ee)=>{var D=F(O,!0,Ht);Ce(D,()=>b(R),9,(ge,j,pe)=>{var S=F(ge,!0,Mt),ce=tt(X(S)),te,B,U,Q;ie(()=>{te!==(te=b(j))&&Le(S,"data-key",te),et(S,`${J(a(h)[b(j)])} svelte-1pg2j5l`),B!==(B=a(d))&&(S.disabled=B),U!==(U=b(j))&&(S.value=U),Q!==(Q=`${J(b(j))} ${J(a(y)[b(j)]||"")}`)&&Le(S,"aria-label",Q),ke(ce,b(j))}),xe("click",S,He(z),!1),q(ge,S)},null),q(O,D)},null),q(s,i)}),Y(N,()=>a(r),s=>{var i=F(s,!0,Xt);Ge(i,(p,_)=>dt(p,_),()=>({particleCount:u()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),q(s,i)},null),L(e,A),at()}export{Ft as component};
